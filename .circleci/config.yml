# Javascript Node CircleCI 2.0 configuration file
#
# Check https://circleci.com/docs/2.0/language-javascript/ for more details
#
version: 2
jobs:
  build:
    machine: true
    # docker:
      # - image: circleci/node:7.10
      # environment:
      #   FI1_BRIDGE_VERSION: v0.0.28
      #   FI2_BRIDGE_VERSION: master

    working_directory: ~/repo

    steps:
      - run: 
          name: "Setup custom environment variables"
          command: |
            echo 'export FI1_BRIDGE_VERSION="v0.0.28"' >> $BASH_ENV
            echo 'export FI2_BRIDGE_VERSION="master"' >> $BASH_ENV

      - run: 
          name: "Check custom environment variables"
          command: |
            echo ${FI1_BRIDGE_VERSION}
            echo ${FI2_BRIDGE_VERSION}

      - checkout
      - run: 
          name: Install node version
          command: |
            nvm install 7.10
            nvm use node
      # - run: 
      #     name: Install nvm
      #     command: |
      #       curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash
      #       export NVM_DIR="${XDG_CONFIG_HOME/:-$HOME/.}nvm"
      #       [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
      #       command -v nvm
      #       nvm install 7.10
      #       nvm use node
      - run: npm install

      # - setup_remote_docker:
      - run: ./script.sh

      